<!DOCTYPE html>
<html lang="en">
<head>
    <title>ESG - Results</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="static/logo.png">
    <link rel="stylesheet" href="static/results.css"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
    <script src="/static/rating.js"></script>
</head>
<body>
    <nav id="nav1">
        <ul>
            <li style=" float:left;">
                <span>home</span>
            </li>
        </ul>
        <div id="logga">
            <a href="/"><img id="logoimg" src=".\static\logo.png"></a>
            <h1 id="logo"><a href="/">ESG</a></h1>
        </div>
    </nav>
    {% if extension_info %}
    {% for i in extension_info %}
        <div id="desc_box">
            <image id="ext_img" src={{ i[2] }}></image>
            <div id="ext_name">Name: {{ i[1] }}</div>
            <div id="ext_id">ID: <i>{{ i[6] }}</i></div>
            <div id="ext_desc">Description: {{ i[3] }}</div>
            <div id="ext_rating">
                <div class="stars-outer">
                    <div class="stars-inner"></div>
                </div>
                <span class="number-rating"></span>
                <i>, {{ i[4] }} ratings</i>
            </div>
                <script>
                    let rating = Math.round({{ i[5] }} * 10) / 10;
                    // Get percentage. This line might return 3 errors. These are just the IDE not understanding whats happening.
                    starPercentage = (rating / 5) * 100;
                    // Round to nearest 10
                    starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                    // Set width of stars-inner to percentage
                    document.querySelector(`.stars-inner`).style.width = starPercentageRounded;
                    // Add number rating
                    document.querySelector(`.number-rating`).innerHTML = rating;
                </script>
        </div>
    {% endfor %}
    {% endif %}
    <nav style="background-color: red; height: 700px; width: 50%;float: left;">
        <div id = "extension_info" class="extension_info" style="background-color: rgb(218, 218, 226); height: 120px; width: 100%;">
            {% if extension_info %}
            {% for i in extension_info %}
            <img id="extensionimg" src={{ i[2]  }} style="height: 100px; width: 100px;">
            <a style="float: right;"><h2>{{ i[1]}}</h2></a>
            <script>
            </script>
            {% endfor %}
            {% endif %}
        </div>
        <div id = "pie" style="height: 250px; width: 100%; background-color: rgb(126, 94, 56);">
            <img src = {{ test }} style="height: 180px; width: 200px;"> </img>

        </div>

        <div  style="height: 250px; width: 100%; background-color: rgb(196, 36, 84);">
            <img src = {{ test2 }} style="height: 180px; width: 200px;"> </img>
        </div>
    </nav>
    <nav style="background-color: yellow; height: 700px; width: 50%; float: left;">
        <p>{{ result }}</p>
    </nav>


</body>
<footer id="footer1">
    Product made by ESG for Â©SoftHouse
</footer>
</html>