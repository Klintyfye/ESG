<!DOCTYPE html>
<html lang="en">
<head>
    <title>ESG - Results</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="static/logo.png">
    <link rel="stylesheet" href="static/results.css"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
    <script src="static/rating.js"></script>
    <script src="static/vis_toggle.js"></script>
</head>
<body>
    <nav id="nav1">
        <ul>
            <li style=" float:left;">
                <span>home</span>
            </li>
        </ul>
        <div id="logga">
            <a href="/"><img id="logoimg" src=".\static\logo.png"></a>
            <h1 id="logo"><a href="/">ESG</a></h1>
        </div>
    </nav>
    <div class="main_box">
        <div class="box">
            <div class="box_spacing">
                {% if extension_info %}
                {% for i in extension_info %}
                <div id="desc_box">
                    <image id="ext_img" src={{ i[2] }}></image>
                    <div id="ext_name">Name: {{ i[1] }}</div>
                    <div id="ext_id">ID: <i>{{ i[6] }}</i></div>
                    <div id="ext_desc">Description: {{ i[3] }}</div>
                    <div id="ext_rating">
                        <div class="stars-outer">
                            <div class="stars-inner"></div>
                        </div>
                        <span class="number-rating"></span>
                        <i>, {{ i[4] }} ratings</i>
                    <button onclick="vis_toggle()">Advanced View</button>
                    </div>
                    <script>
                        let rating = Math.round({{ i[5] }} * 10) / 10;
                        // Get percentage. This line might return 3 errors. These are just the IDE not understanding whats happening.
                        starPercentage = (rating / 5) * 100;
                        // Round to nearest 10
                        starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;
                        // Set width of stars-inner to percentage
                        document.querySelector(`.stars-inner`).style.width = starPercentageRounded;
                        // Add number rating
                        document.querySelector(`.number-rating`).innerHTML = rating;
                    </script>
                </div>
                {% endfor %}
                {% endif %}
            </div>
        </div>
        <div class="box">
            <div class="box_spacing">
                <div id="vt_text"></div>
                <img id="vt_img" src = {{ test }}> </img>
            </div>
        </div>
        <div id="vis_toggle" class="box grid_col_span_2 grid_row_span_2">
            <div class="box_spacing">
                <div id="res_box">{{ result }}</div>
            </div>
        </div>
        <div class="box grid_col_span_2">
            <div class="box_spacing">
                <div id="history_text"></div>
                <img id="history_img" src = {{ test2 }}> </img>
            </div>
        </div>
    </div>
</body>
<footer id="footer1">
    Product made by ESG for Â©SoftHouse
</footer>
</html>